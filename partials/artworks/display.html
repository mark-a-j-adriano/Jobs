<div class="container" style="padding:0">
    <!-- Header content -->
    <section class="content" style="background-color:white;min-height: 0px;padding:0">
        <div class="row">
            <div class="col-md-12">
                <!--<img style="width:100%" src="./lib/img/jobs/JobReqBanner - Display.jpg">-->
                <div class="box" style="margin-bottom:0px;">
                    <div class="box-header" style="background-image:url('./lib/img/jobs/JobReqBanner - Display.jpg');background-size: cover;min-height:65px;">
                        <!--<img style="width:100%" src="./lib/img/jobs/JobReqBanner - Display.jpg">-->
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" title="Close Task" style="background-color:rgba(255,255,255,0.5);" ng-click="ctrl.gotoMain();">
		                        <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="padding-left:10px;padding-right:10px;">
            <div class="col-md-9">
                <span ng-show="ctrl.task.status=='new'"><h4>New Artwork Request</h4></span>
                <div class="info-box bg-aqua" ng-click="ctrl.revertTask();" ng-show="ctrl.docMessages.length > 0" style="margin-top:10px;height:50px;min-height: 50px;cursor:pointer">
                    <span class="info-box-icon" style="height:50px;">
                        <i class="fa fa-comments-o"></i>
                    </span>
                    <div class="info-box-content" style="height:50px;">
                        <span class="info-box-text">MESSAGES</span>
                        <span class="info-box-number">{{ctrl.docMessages.length}}</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3" style="text-align: right;">
                <h4>Status: {{ctrl.task.status | uppercase}}</h4>
                <h5>Task Number: {{ctrl.task.task_no}}</h5>
            </div>
        </div>
    </section>

    <!-- Main content -->

    <section class="content" style="background-color:white;padding-top:0">
        <!-- Task Details - START -->
        <div class="row">
            <div class="col-md-4">
                <!-- Request Information - START -->
                <div class="box box-solid box-display">
                    <div class="box-header curved">
                        Request Information
                    </div>
                    <div class="box-body">
                        <div class="form-group">
                            <label>Client / Title:</label>
                            <input class="form-control input-sm fld-att" ng-model="ctrl.task.title" type="text" ng-readonly="ctrl.ACL.section0">
                        </div>

                        <div ng-show="ctrl.readOnly">
                            <div class="form-group" ng-hide="ctrl.currentUser.canEdit=='writer' || ctrl.currentUser.canEdit=='designer'">
                                <label>Ad Spend :</label>
                                <div class="input-group">
                                    <span class="input-group-addon fld-att">$</span>
                                    <input id='ad_spend' type="text" class="form-control input-sm fld-att" style="text-align:right;padding-right:10px;" ng-model="ctrl.display.ad_spend"
                                        ng-readonly="ctrl.ACL.section1">
                                </div>
                            </div>
                            <div class="form-group" ng-hide="ctrl.currentUser.canEdit=='writer' || ctrl.currentUser.canEdit=='designer'">
                                <label>Production Cost :</label>
                                <div class="input-group">
                                    <span class="input-group-addon fld-att">$</span>
                                    <input id='production_cost' type="text" class="form-control input-sm fld-att" style="text-align:right;padding-right:10px;"
                                        ng-model="ctrl.display.production_cost" ng-readonly="ctrl.ACL.section1">
                                </div>
                            </div>
                        </div>
                        <div ng-hide="ctrl.readOnly">
                            <div class="form-group" ng-hide="ctrl.currentUser.canEdit=='writer' || ctrl.currentUser.canEdit=='designer'">
                                <label>Ad Spend :</label>
                                <div class="input-group">
                                    <span class="input-group-addon fld-att">$</span>
                                    <input id='ad_spend' type="number" class="form-control input-sm fld-att" style="text-align:right;padding-right:10px;" ng-model="ctrl.task.ad_spend"
                                        min="0.01" step="0.01" ng-readonly="ctrl.ACL.section1">
                                </div>
                            </div>
                            <div class="form-group" ng-hide="ctrl.currentUser.canEdit=='writer' || ctrl.currentUser.canEdit=='designer'">
                                <label>Production Cost :</label>
                                <div class="input-group">
                                    <span class="input-group-addon fld-att">$</span>
                                    <input id='production_cost' type="number" class="form-control input-sm fld-att" style="text-align:right;padding-right:10px;"
                                        ng-model="ctrl.task.production_cost" min="0.01" step="0.01" ng-readonly="ctrl.ACL.section1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Request Information - END -->

                <!-- Requested By - START -->
                <div class="box box-solid box-display">
                    <div class="box-body">
                        <div class="form-group">
                            <label>Submitted By :</label>
                            <input class="form-control input-sm fld-att" ng-model="ctrl.task.submitted_by" type="text" ng-readonly="ctrl.ACL.section0">
                        </div>
                        <div class="form-group" style="width:100%">
                            <div class="row">
                                <div class="col-sm-4">
                                    <label>Extension :</label>
                                    <input id='extension' ng-model="ctrl.task.extension" text-mask="ctrl.MaskConfig.extNum" type="text" class="form-control  input-sm fld-att"
                                        ng-readonly="ctrl.ACL.section0" />
                                </div>
                                <div class="col-sm-8">
                                    <label>Mobile Number :</label>
                                    <input id='mobile_no' ng-model="ctrl.task.mobile_no" text-mask="ctrl.MaskConfig.phone" type="text" class="form-control  input-sm fld-att"
                                        ng-readonly="ctrl.ACL.section0" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Team :</label>
                            <input class="form-control input-sm fld-att" ng-model="ctrl.task.team" type="text" ng-readonly="ctrl.ACL.section0">
                        </div>
                        <div class="form-group">
                            <label>CC Response : {{ctrl.cc_response_dsp.length}}</label>
                            <div class="row" style="margin-left: 5px; margin-right: 5px;">
                                <div class="col-sm-12" style="background-color:#FFFAFC;height:60px;border: 1px solid #D2D6DE;overflow-y: scroll;">
                                    <ul ng-show="ctrl.cc_response_dsp.length > 0;">
                                        <li ng-repeat=" opt in ctrl.cc_response_dsp">
                                            {{ opt }}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="overlay" ng-hide="ctrl.currentUser!=''">
                        <i class="fa fa-refresh fa-spin"></i>
                    </div>
                </div>
                <!-- Requested By  - END -->


            </div>
            <div class="col-md-8">
                <!-- Specification  - START -->
                <div class="box box-solid box-display">
                    <div class="box-header curved">
                        Specifications
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-4 col-sm-4">
                                <div class="form-group">
                                    <label>Job Classification</label>
                                    <select name="artwork_type" id="artwork_type" class="form-control input-sm select-att" ng-model="ctrl.task.artwork_type"
                                        ng-disabled="ctrl.ACL.section2">
                                        <option ng-repeat="option in ctrl.artwork_Types" value="{{option.artwork_type}}">{{option.artwork_type}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-4 col-sm-4">
                                <div class="form-group">
                                    <label>Publication</label>
                                    <select name="publication" id="publication" class="form-control input-sm select-att" ng-model="ctrl.task.publication" ng-change="ctrl.defineLang();"
                                        ng-disabled="ctrl.ACL.section2">
                                        <option ng-repeat="option in ctrl.pubOptions" value="{{option.product_code}}">{{option.product_name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-4 col-sm-4">
                                <div class="form-group">
                                    <label>Other</label>
                                    <input name="other_pub" id="other_pub" class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.other_pub" ng-readonly="ctrl.ACL.section2"
                                        ng-disabled="ctrl.task.publication != 'Other'">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-4 col-sm-4">
                                <div class="form-group">
                                    <label>Type</label>
                                    <select name="pub_type" id="pub_type" ng-model="ctrl.task.pub_type" ng-disabled="ctrl.ACL.section2" class="form-control input-sm select-att"
                                        ng-change="ctrl.defineType(true);">
                                        <option ng-repeat="option in ctrl.pubTypes" value="{{option.code}}">{{option.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-4 col-sm-4">
                                <div class="form-group">
                                    <label>Pre-defined size</label>
                                    <select name="size_option" id="size_option" class="form-control input-sm select-att" ng-model="ctrl.task.size_option" ng-change="ctrl.defineSize();"
                                        ng-disabled="ctrl.ACL.section2">
                                        <option ng-repeat="option in ctrl.pubSizes" value="{{option.size}}">{{option.size}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-4 col-sm-4">
                                <div class="form-group" ng-hide="ctrl.task.size_option=='Other'">
                                    <label>Height x Cols</label>
                                    <input name="pub_size" id="pub_size" class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.pub_size" text-mask="ctrl.MaskConfig.size"
                                        ng-readonly="ctrl.ACL.section0">
                                </div>
                                <div class="form-group" ng-show="ctrl.task.size_option=='Other'">
                                    <label>Size</label>
                                    <input name="pub_size" id="pub_size" class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.pub_size" ng-readonly="ctrl.ACL.section2">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-inline" style="width:100%;margin-left: 20px;">
                                <div class="form-group" style="width:100%">
                                    <label class="col-sm-2" style="padding:0px;">Language : </label>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <input type="radio" id="language" ng-model="ctrl.task.language" value="English" ng-disabled="ctrl.ACL.section2" />
                                            <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>English</label>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <input type="radio" id="language" ng-model="ctrl.task.language" value="Chinese" ng-disabled="ctrl.ACL.section2" />
                                            <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>Chinese</label>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <div class="checkbox">
                                                <input type="radio" id="language" ng-model="ctrl.task.language" value="Malay" ng-disabled="ctrl.ACL.section2" />
                                                <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>Malay</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">&nbsp; </div>
                                </div>
                                <div class="form-group" style="width:100%;padding-top:15px;">
                                    <label class="col-sm-2" style="padding:0px;">Colour : </label>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <input type="radio" id="colour" ng-model="ctrl.task.colour" value="B&W" ng-disabled="ctrl.ACL.section2" />
                                            <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>B&amp;W</label>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <input type="radio" id="colour" ng-model="ctrl.task.colour" value="Full colour" ng-disabled="ctrl.ACL.section2" />
                                            <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>Full colour</label>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" style="padding:0px;">
                                        <div class="checkbox">
                                            <input type="radio" id="colour" ng-model="ctrl.task.colour" value="Spot Colour" ng-disabled="ctrl.ACL.section2" ng-click="ctrl.formatMe('colour');"
                                            />
                                            <label style="cursor:default;"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>Spot Colour</label>
                                        </div>
                                    </div>

                                    <div class="col-sm-4" style="padding:0px;">
                                        <input id='colour_option' name='colour_option' type="text" class="form-control input-sm fld-att" ng-model="ctrl.task.colour_option"
                                            ng-hide="ctrl.task.colour!='Spot Colour'" style="border-top:0;border-left:0;border-right:0;position: relative;top: -5px;min-width:220px;"
                                            ng-readonly="ctrl.ACL.section2">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Specification  - END -->


                <!-- ASSIGNMENT DETAILS -->
                <div class="box box-solid box-display">
                    <div class="box-header curved">
                        Assignment Details
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Head Of CreativeLAB : </label>
                                    <p class="input-group">
                                        <input id='creative_head' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.creative_head" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', '2', 'creative_head', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Creative Director : </label>
                                    <p class="input-group">
                                        <input id='creative_director' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.creative_director" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', '3', 'creative_director', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Art Director : </label>
                                    <p class="input-group">
                                        <input id='art_director' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.art_director" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', '4', 'art_director', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Asst Art Director : </label>
                                    <p class="input-group">
                                        <input id='asst_art_director' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.asst_art_director" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', '6', 'asst_art_director', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Operations :</label>
                                    <p class="input-group">
                                        <input id='operations' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.operations" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', 7, 'operations', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Designer : </label>
                                    <p class="input-group">
                                        <input id='designer' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.designer" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', [7,12,17], 'designer', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>English Writer :</label>
                                    <p class="input-group">
                                        <input id='english_writer' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.english_writer" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('English WordLAB', 'Creative', '20', 'english_writer', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>

                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Freelancer : </label>
                                    <p class="input-group">
                                        <input id='freelancer' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.freelancer" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('DisplayLAB', 'Creative', '17', 'freelancer', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Chinese Writer :</label>
                                    <p class="input-group">
                                        <input id='chinese_writer' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.chinese_writer" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('Chinese WordLAB', 'Creative', '20', 'chinese_writer', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="col-6 col-sm-6">
                                <div class="form-group">
                                    <label>Malay Writer :</label>
                                    <p class="input-group">
                                        <input id='malay_writer' class="form-control input-sm fld-att" type="text" ng-model="ctrl.task.malay_writer" ng-readonly="ctrl.ACL.section0">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default fld-att" ng-disabled="ctrl.ACL.section3" 
                                            ng-click="ctrl.selectUser('Malay WordLAB', 'Creative', '20', 'malay_writer', '0');">
                                                <i class="fa fa-user"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- Task Details - END -->
    </section>

    <section class="content" style="background-color:white;padding-top:0">
        <!-- Materials & Instructions - START -->
        <div class="row">
            <div class="col-md-4">
                <div class="box box-solid box-display" style="margin-bottom: 10px;">
                    <div class="box-header curved">
                        <i>Materials</i>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="box box-solid box-display" style="margin-bottom: 10px;">
                    <div class="box-header curved">
                        <i>Instructions</i>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="box box-solid box-none">
                    <div class="box-body" style="min-height: 150px;margin: 0;padding-top:5px;padding-bottom:0;">
                        <table style="width:350px;border:0px solid gray;">
                            <thead style="display: block;border-bottom:1px solid lightgray; ">
                                <tr>
                                    <th colspan="3" style="width:350px; text-align:left;"><i>Softcopy attachment</i></th>
                                </tr>
                            </thead>
                            <tbody style="display: block;overflow-y: auto;overflow-x: hidden;max-height: 100px;min-height: 100px;">
                                <tr ng-repeat="file in ctrl.task.materials" ng-class-odd="'stripedTableRow'">
                                    <td style="width:200px;text-align:left;">
                                        <a ng-href="{{file.url}}" target="_blank">{{file.name}}</a>
                                    </td>
                                    <td style="width:75px;text-align:center;">
                                        {{file.uploadDt}}
                                    </td>
                                    <td style="width:75px;text-align:right;">
                                        <a target="_self" ng-href="{{file.url}}" download="{{file.name}}">
                                            <button   ng-show="file">                                                    
                                                <i class="fa fa-download"></i>
                                            </button>
                                        </a>
                                        <button ng-click="ctrl.deleteFile(file, 'materials')" ng-hide="ctrl.ACL.section4" style="color:red;">
                                             <i class="fa fa-trash-o"></i>	
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="box-footer" style="border-top:1px solid lightgray;padding-top:5px;margin:0;">
                        <span ng-if="ctrl.task.materials.length>0">{{ctrl.task.materials.length}} &nbsp; attachment(s)</span>
                        <div class="pull-right">
                            <div class="btn btn-default" name="materials" ngf-select="ctrl.uploadFiles($files, 'materials')" ngf-multiple="true" style="border: 1;font-weight: bold;"
                                ng-hide="ctrl.ACL.section4">Upload
                            </div>
                        </div>

                    </div>
                    <div class="overlay" ng-show='ctrl.spinners.materials.visible'>
                        <i class="fa fa-spinner fa-pulse fa-2x fa-fw text-danger"></i>
                        <uib-progressbar class="progress-striped active" value="dynamic" type="warning">
                            <b>{{ctrl.spinners.materials.progress}}%</b>
                        </uib-progressbar>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="box box-solid box-none">
                    <div class="box-body" style="padding-top:0;padding-bottom:0;border:1px solid gray;">
                        <div class="form-group">
                            <textarea class="form-control ng-pristine ng-valid ng-empty ng-touched ng-untouched fld-att" style="resize: horizontal; min-height: 160px;border:0;cursor:text;"
                                ng-model="ctrl.task.instruction" ng-readonly="ctrl.ACL.section4"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Materials & Instructions - END -->

        <!-- Preview of Completed ARTICLE - START -->
        <div class="row" ng-show="ctrl.statusNum > 1">
            <div class="col-md-12">
                <div class="box box-solid box-display" style="margin-bottom: 10px;">
                    <div class="box-header curved">
                        <i>Text</i>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="box box-solid box-none">
                    <div class="box-body" style="min-height: 150px;margin: 0;padding-top:5px;padding-bottom:0;">
                        <table style="width:350px;border:0px solid gray;">
                            <thead style="display: block;border-bottom:1px solid lightgray; ">
                                <tr>
                                    <th colspan="3" style="width:350px; text-align:left;"><i>Article attachment</i></th>
                                </tr>
                            </thead>
                            <tbody style="display: block;overflow-y: auto;overflow-x: hidden;max-height: 100px;min-height: 100px;">
                                <tr ng-repeat="file in ctrl.task.article" ng-class-odd="'stripedTableRow'">
                                    <td style="width:200px;text-align:left;">
                                        <a ng-href="{{file.url}}" target="_blank">{{file.name}}</a>
                                    </td>
                                    <td style="width:75px;text-align:center;">
                                        {{file.uploadDt}}
                                    </td>
                                    <td style="width:75px;text-align:right;">
                                        <a target="_self" ng-href="{{file.url}}" download="{{file.name}}">
                                            <button   ng-show="file">                                                    
                                                <i class="fa fa-download"></i>
                                            </button>
                                        </a>
                                        <button ng-click="ctrl.deleteFile(file, 'article')" ng-hide="ctrl.ACL.section5" style="color:red;">
                                             <i class="fa fa-trash-o"></i>	
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="box-footer" style="border-top:1px solid lightgray;padding-top:5px;margin:0;">
                        <span ng-if="ctrl.task.article.length>0">{{ctrl.task.article.length}} &nbsp; attachment(s)</span>
                        <div class="pull-right">
                            <div class="btn btn-default" name="article" ngf-select="ctrl.uploadFiles($files, 'article')" ngf-multiple="true" style="border: 1;font-weight: bold;"
                                ng-hide="ctrl.ACL.section5">Upload
                            </div>
                        </div>

                    </div>
                    <div class="overlay" ng-show='ctrl.spinners.article.visible'>
                        <i class="fa fa-spinner fa-pulse fa-2x fa-fw text-danger"></i>
                        <uib-progressbar class="progress-striped active" value="dynamic" type="warning">
                            <b>{{ctrl.spinners.article.progress}}%</b>
                        </uib-progressbar>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="box box-solid box-none">
                    <div class="box-body" style="padding-top:0;padding-bottom:0;border:1px solid gray;">
                        <div class="form-group">
                            <textarea class="form-control ng-pristine ng-valid ng-empty ng-touched ng-untouched fld-att" style="resize: horizontal; min-height: 160px;border:0;cursor:text;"
                                ng-model="ctrl.task.editorial" ng-readonly="ctrl.ACL.section5  || ctrl.task.status!='In Progress'"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Preview of Completed ARTICLE - END -->

        <!-- Product Details - START -->
        <div class="row">
            <div class="col-md-12">
                <div class="box box-solid box-display">
                    <div class="box-header curved">
                        Product Details
                    </div>
                    <div class="box-body" ng-hide="ctrl.statusNum>0">
                        <button type="button" class="btn btn-defult" style="border: 1;font-weight: bold;" ng-click="ctrl.addProduct();">
                            Add Product
                        </button>
                    </div>
                    <div class="box-footer" style="margin: 0;padding-top:0px;padding-bottom:0;">
                        <table class="table table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">Sub Task #</th>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">Publication</th>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">Pub Date</th>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">Presentation Date</th>

                                    <th class="col-xs-2" style="text-align:center;vertical-align: middle;">ET Number</th>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">ET Date</th>
                                    <th class="col-xs-1" style="text-align:center;vertical-align: middle;">Artwork Preview</th>
                                    <th class="col-xs-2" style="text-align:center;vertical-align: middle;">Status</th>
                                    <th class="col-xs-2" style="text-align:center;vertical-align: middle;">&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody style="min-height:100px;">
                                <tr ng-repeat="option in ctrl.productList track by $index">
                                    <td class="col-xs-1" style="text-align:center">{{$index + 1}}</td>
                                    <td class="col-xs-1" style="text-align:center">{{option.pubID}}</td>
                                    <td class="col-xs-1" style="text-align:center">{{option.pubDate | date:"dd/MM/yyyy"}}</td>
                                    <td class="col-xs-1" style="text-align:center">{{option.presentationDate | date:"dd/MM/yyyy"}}</td>

                                    <td class="col-xs-2" style="text-align:center" ng-show="option.etNum_tbd">TBA</td>
                                    <td class="col-xs-2" style="text-align:center" ng-hide="option.etNum_tbd">{{option.etNum}}</td>
                                    <td class="col-xs-1" style="text-align:center">{{option.etDate | date:"dd/MM/yyyy"}}</td>

                                    <td class="col-xs-1" style="text-align:center;cursor:pointer;">
                                        <a ng-href="{{option.artwork.url}}" target="_blank" ng-show="option.artwork">
                                                <button ><i class="fa fa-eye"></i></button>
                                                                                       
                                        </a> &nbsp;
                                        <a target="_self" ng-href="{{option.artwork.url}}" download="{{option.artwork.name}}" ng-show="option.artwork">
                                            <button ><i class="fa fa-download"></i></button>
                                        </a>
                                    </td>

                                    <td class="col-xs-2" style="text-align:center">{{option.status}}</td>
                                    <td class="col-xs-2" style="text-align:center; color: black;" ng-show="ctrl.ACL.section6 || option == null">
                                        &nbsp;
                                    </td>
                                    <td class="col-xs-2" style="text-align:center; color: black;" ng-hide="ctrl.ACL.section6 || option == null">
                                        <div ng-show="ctrl.currentUser.canEdit == 'coordinator'">
                                            <div class="btn-group" ng-show="option.status=='For Approval'">
                                                <button type="button" class="btn btn-default" ng-click="ctrl.ChangeStatus($index,'Approve');" popover="Approve Artwork" popover-trigger="mouseenter">
                                                    <i class="fa fa-thumbs-up"></i></button>
                                                <button type="button" class="btn btn-default" ng-click="ctrl.ChangeStatus($index,'Decline');" popover="Revert Artwork" popover-trigger="mouseenter">
                                                    <i class="fa  fa-thumbs-down"></i></button>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">                                                   
                                                        <i class="fa fa-get-pocket"></i>
                                                    </button>
                                                    <ul class="dropdown-menu">
                                                        <li><a ng-click="ctrl.editRow(option, $index);">Edit Row</a></li>
                                                        <li><a ng-click="ctrl.deleteRow($index);">Delete Row</a></li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="btn-group" ng-hide="option.status=='For Approval'">
                                                <button type="button" class="btn btn-danger pull-right" ng-click="ctrl.deleteRow($index);" style="text-align:center; color: black;"
                                                    popover="Delete" popover-trigger="mouseenter">
                                                    <i class="fa fa-trash-o"></i>
                                                </button>
                                                <button type="button" class="btn btn-info pull-right" ng-click="ctrl.editRow(option, $index);" popover="Edit" popover-trigger="mouseenter"
                                                    style="text-align:center; color: black;">
                                                    <i class="fa fa-pencil"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div ng-show="ctrl.currentUser.canEdit == 'sales'">
                                            <div ng-show="ctrl.task.status=='In Progress'">
                                                <div class="btn-group" ng-show="option.status=='For Approval'">
                                                    <button type="button" class="btn btn-default" ng-click="ctrl.ChangeStatus($index,'Approve');" popover="Approve Artwork" popover-trigger="mouseenter"><i class="fa fa-thumbs-up"></i></button>
                                                    <button type="button" class="btn btn-default" ng-click="ctrl.ChangeStatus($index,'Decline');" popover="Revert Artwork" popover-trigger="mouseenter"><i class="fa  fa-thumbs-down"></i></button>
                                                </div>
                                            </div>

                                            <div ng-hide="ctrl.task.status=='In Progress'">
                                                <button type="button" class="btn btn-danger pull-right" ng-click="ctrl.deleteRow($index);" style="text-align:center; color: black;"
                                                    popover="Delete" popover-trigger="mouseenter">
                                                    <i class="fa fa-trash-o"></i> 
                                                </button>
                                                <button type="button" class="btn btn-info pull-right" ng-click="ctrl.editRow(option, $index);" popover="Edit" popover-trigger="mouseenter"
                                                    style="text-align:center; color: black;">
                                                    <i class="fa fa-pencil"></i> 
                                                </button>
                                            </div>
                                        </div>
                                        <div ng-show="ctrl.currentUser.canEdit == 'designer'">
                                            <div class="btn-group" ng-show="ctrl.task.status=='In Progress' && option.status!='Completed'">
                                                <button type="button" class="btn btn-info pull-right" ng-click="ctrl.editRow(option, $index);" popover="Edit" popover-trigger="mouseenter"
                                                    style="text-align:center; color: black;">
                                                    <i class="fa fa-pencil"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Product Details - END -->

        <!-- Audit Trail Logs - START -->
        <div class="row" ng-show="(ctrl.task.status!='new')">
            <div class="col-md-12">
                <div class="box box-solid box-display">
                    <div class="box-header curved">
                        Edit History
                    </div>
                    <div class="box-body" style="max-height:350px;overflow-y: scroll;">
                        <table class="table table-bordered" ng-show="ctrl.docHistory.length==0">
                            <thead>
                                <tr>
                                    <th class="col-xs-3" style="text-align:center">Date</th>
                                    <th class="col-xs-3" style="text-align:center">Modified By</th>
                                    <th class="col-xs-6" style="text-align:center">Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="col-xs-3" style="text-align:center">&nbsp;</td>
                                    <td class="col-xs-3" style="text-align:center">&nbsp;</td>
                                    <td class="col-xs-6" style="text-align:justify">&nbsp;</td>
                                </tr>
                            </tbody>
                        </table>

                        <uib-tabset active="active" style="border: 0px solid lightgray; " ng-hide="ctrl.docHistory.length==0">
                            <uib-tab index="0" heading="Audit Trail" style="border: 0px solid lightgray; ">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th class="col-xs-3" style="text-align:center">Date</th>
                                            <th class="col-xs-3" style="text-align:center">Modified By</th>
                                            <th class="col-xs-6" style="text-align:center">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="log in ctrl.docHistory">
                                            <td class="col-xs-3" style="text-align:center">{{log.action_taken_at}}</td>
                                            <td class="col-xs-3" style="text-align:center">{{log.action_taken_by}}</td>
                                            <td class="col-xs-6" style="text-align:justify">{{log.detail}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </uib-tab>
                            <uib-tab index="1" heading="Message Trail" style="border: 0px solid lightgray; ">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th class="col-xs-3" style="text-align:center">Date</th>
                                            <th class="col-xs-3" style="text-align:center">Message By</th>
                                            <th class="col-xs-6" style="text-align:center">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="chat in ctrl.docMessages">
                                            <td class="col-xs-3" style="text-align:center">{{chat.sent_date}}</td>
                                            <td class="col-xs-3" style="text-align:center">{{chat.sender}}</td>
                                            <td class="col-xs-6" style="text-align:justify">{{chat.msg}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </uib-tab>
                        </uib-tabset>
                    </div>
                </div>
            </div>
        </div>
        <!--  Audit Trail Logs - END -->
    </section>
</div>

<!-- BUTTONS -->
<div class="container" style="padding:0">
    <!-- READ ONLY TASK -->
    <section class="content" style="background-color:white;padding-top:0" ng-show="ctrl.readOnly">
        <div class="row">
            <div class="col-md-5">
                <button type="button" class="btn btn-default" ng-click="ctrl.gotoMain();"><i class="fa fa-remove"></i> Close</button>
            </div>
            <div class="col-md-1">
                <button type="button" class="btn btn-default btn-sm" ng-click="ctrl.developerLog=!ctrl.developerLog" ng-show="ctrl.isLogEnabled" style="border: 1px solid #a1a1a1;border-radius: 25px;background:white;">
                     <i class="fa fa-question-circle"></i>
                </button>
            </div>
            <div class="col-md-1">
                <button type="button" class="btn btn-primary bg-teal-gradient" ng-click="ctrl.revertTask();" ng-hide="(ctrl.task.status=='new' || ctrl.task.status=='Completed' || ctrl.task.status=='Cancelled')">
                         <i class="fa fa-comments-o"></i> Chat
                </button>
            </div>
            <div class="col-md-5">
                <div class="pull-right">
                    <button type="button" class="btn btn-danger" ng-click="ctrl.revertTask('cancel');" ng-show="(ctrl.currentUser.role>=25 || ctrl.currentUser.role<10) && ctrl.currentUser.canEdit!='' &&
                    !(ctrl.statusNum == 0  || ctrl.statusNum > 5)">
                      <i class="fa fa-hand-stop-o"></i> &nbsp; Cancel Artwork Request
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="ctrl.editTask();" ng-hide="ctrl.currentUser.canEdit=='' || ctrl.currentUser.canEdit=='reader'">
                        <i class="fa fa-pencil-square-o"></i> &nbsp; Edit
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- EDIT TASK  -->
    <section class="content" style="background-color:white;padding-top:0" ng-hide="ctrl.readOnly">
        <div class="row">
            <div class="col-md-2">
                <button type="button" class="btn btn-default" ng-click="ctrl.gotoMain();"><i class="fa fa-remove"></i> Close</button>
            </div>
            <div class="col-md-10">

                <div class="pull-right" ng-show="ctrl.currentUser.canEdit == 'sales'">
                    <button type="button" class="btn btn-danger" ng-click="ctrl.revertTask('cancel');" ng-show="(ctrl.currentUser.role>=25 || ctrl.currentUser.role<10) && ctrl.currentUser.canEdit!='' &&
                    !(ctrl.statusNum == 0  || ctrl.statusNum > 5)">
                      <i class="fa fa-hand-stop-o"></i> &nbsp; Cancel Artwork Request
                    </button>

                    <button type="button" class="btn btn-warning" ng-click="ctrl.submitTask('Draft');" ng-show="(ctrl.task.status=='new')">
                        <i class="fa fa-save"></i> &nbsp; Save As Draft
                    </button>
                    <button type="button" class="btn btn-success" ng-click="ctrl.submitTask();" ng-show="ctrl.statusNum == 0 && ctrl.task.status!='Request Re-Submission'"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Submit
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="ctrl.submitTask('Previous Status');" ng-show="ctrl.task.status=='Request Re-Submission'"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Re-Submit
                    </button>

                    <button type="button" class="btn btn-primary" ng-click="revertTask('rejected');" ng-show="ctrl.task.status=='For Approval'"
                        style="margin-left: 10px;">
                        <i class="fa fa-hand-o-left"></i> &nbsp; For Revision
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="ctrl.approveArtwork();" ng-show="ctrl.task.status=='For Approval'"
                        style="margin-left: 10px;">
                        <i class="fa fa-thumbs-up"></i> &nbsp; Approve
                    </button>

                    <button type="button" class="btn btn-primary" ng-click="ctrl.submitTask( 'In Progress' );" ng-show="ctrl.task.status=='In Progress'"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Save Updates
                    </button>

                </div>

                <div class="pull-right" ng-show="ctrl.currentUser.canEdit == 'writer'">
                    <button type="button" class="btn btn-primary" ng-click="ctrl.submitTask( 'In Progress' );" ng-show="ctrl.task.status=='In Progress'"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Save Updates
                    </button>
                </div>

                <div class="pull-right" ng-show="ctrl.currentUser.canEdit == 'designer'">
                    <button type="button" class="btn btn-primary" ng-click="ctrl.submitTask( ctrl.task.status );" ng-show="ctrl.task.status=='In Progress'"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Save Updates
                    </button>
                </div>

                <div class="pull-right" ng-show="ctrl.currentUser.canEdit == 'coordinator'">
                    <button type="button" class="btn btn-danger" ng-click="ctrl.revertTask('direct cancel');" ng-show="(ctrl.currentUser.role>=25 || ctrl.currentUser.role<10) && ctrl.currentUser.canEdit!='' &&
                        !(ctrl.statusNum == 0  || ctrl.statusNum > 5) && ctrl.task.status!='Cancellation Request'">
                        <i class="fa fa-hand-stop-o"></i> &nbsp; Cancel Artwork
                    </button>

                    <button type="button" class="btn btn-danger" ng-click="ctrl.submitTask( 'Cancelled' );" ng-show="ctrl.task.status=='Cancellation Request'"
                        style="margin-left: 10px;">
                        <i class="fa fa-close"></i> &nbsp; Cancel Artwork
                    </button>

                    <button type="button" class="btn btn-warning" ng-click="ctrl.revertTask('revert');" ng-show="ctrl.task.status=='Pending Assignment'"
                        style="margin-left: 10px;">
                        <i class="fa fa-reply"></i> &nbsp; Request Re-submission
                    </button>
                    <button type="button" class="btn btn-success" ng-click="ctrl.isAssigned();" style="margin-left: 10px;" ng-show="ctrl.task.status=='Pending Assignment' || ctrl.statusNum == 0"
                        style="margin-left: 10px;">
                        <i class="fa fa-save"></i> &nbsp; Save Assignments
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="ctrl.submitTask( ctrl.task.status );" style="margin-left: 10px;"
                        ng-hide="ctrl.task.status=='Cancelled' || ctrl.task.status=='Completed'">
                        <i class="fa fa-save"></i> &nbsp; Save Updates
                    </button>
                    <button type="button" class="btn btn-success" ng-click="ctrl.closeDisplayTask();" ng-show="ctrl.task.status=='In Progress'"
                        style="margin-left: 10px;">
                        <i class="fa fa-check"></i> &nbsp; Task Completed
                    </button>
                </div>

                <div class="pull-right">
                    <button type="button" class="btn btn-primary bg-teal-gradient pull-right" ng-click="ctrl.revertTask();" ng-hide="(ctrl.statusNum == 0 || ctrl.statusNum == 3)"
                        style="margin-left: 10px;margin-right: 10px;">
                         <i class="fa fa-comments-o"></i> Chat
                    </button>

                    <button type="button" class="btn btn-default btn-sm" ng-click="ctrl.developerLog=!ctrl.developerLog" ng-show="ctrl.isLogEnabled" style="border: 1px solid #a1a1a1;border-radius: 25px;background:white;margin-left: 10px;margin-right: 10px;">
                        <i class="fa fa-question-circle"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="content" style="background-color:white;padding-top:0" ng-show="ctrl.developerLog">
        <div class="row">
            <div class="col-md-6">
                <p>
                    <u><b>CURRENT USER</b></u>
                </p>
                <br>
                <table>
                    <tr ng-repeat="(key, val) in ctrl.currentUser">
                        <td><b>{{key}}</b></td>
                        <td style="padding-left:10px;padding-right:10px;color:blue;">:</td>
                        <td>{{val}}</td>
                    </tr>
                </table>
                <br>
                <br>
                <p>
                    <u><b>PROGRAMMER DEBUG LOG</b></u>
                </p>
                <br>
                <p><b>task status</b> : {{ctrl.task.status}}</p>
                <p><b>status number</b> : {{ctrl.statusNum}}</p>
                <p><b>readOnly</b> : {{ctrl.readOnly}}</p>
                <br>
                <br>
                <p>
                    <u><b>SECTION ACCESS - RESTRICTIONS</b></u>
                </p>
                <br>
                <p><b>Section 1</b> - {{ ctrl.ACL.section1 }} </p>
                <p><b>Section 2</b> - {{ ctrl.ACL.section2 }} </p>
                <p><b>Section 3</b> - {{ ctrl.ACL.section3 }} </p>
                <p><b>Section 4</b> - {{ ctrl.ACL.section4 }} </p>
                <p><b>Section 5</b> - {{ ctrl.ACL.section5 }} </p>
                <p><b>Section 6</b> - {{ ctrl.ACL.section6 }} </p>
                <p><b>Section 7</b> - {{ ctrl.ACL.section7 }} </p>
                <p><b>Section 8</b> - {{ ctrl.ACL.section8 }} </p>
                <p><b>Section 9</b> - {{ ctrl.ACL.section9 }} </p>
            </div>
            <div class="col-md-6">
                <p>
                    <u><b>TASK DETAILS</b></u>
                </p>
                <table>
                    <tr ng-repeat="(key, val) in ctrl.task">
                        <td><b>{{key}}</b></td>
                        <td style="padding-left:10px;padding-right:10px;color:blue;">:</td>
                        <td>{{val}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </section>
</div>
<input name="_method" class="form-control input-sm fld-att" type="hidden" value="put" ng-model="ctrl.task._method">